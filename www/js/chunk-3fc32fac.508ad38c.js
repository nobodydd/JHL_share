(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fc32fac"],{2269:function(t,e,a){},2627:function(t,e,a){},"454f":function(t,e,a){a("46a7");var n=a("584a").Object;t.exports=function(t,e,a){return n.defineProperty(t,e,a)}},"46a7":function(t,e,a){var n=a("63b6");n(n.S+n.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"4f11":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAqhJREFUeAHtms1L1UEUhtX8IJUwEEGiRKggEqGNiwpx08qiaOEmMKE2QctyIfQXRGAtxJ0o1CYEEaTCRYsgqEUgRAWChIohRBpEH1TengMOHIZWwoHD3HPgZebcO8yc5x283pnframJCAfCgXAgHAgHwoFwIBwIB8KBcMChA5VKpRu9QJto2GGJdiUB3Is+oRTrdqs5mxnifrSdyHfbGWdl2pQD7CX0I4OfJq+3WdHRrEBeR38y+LvktY7KtCkFyLEMfIf8ls1qjmaV3UX3M/jf5FcdlWlTCpAN6FEG/5180GZFR7MC2YqeZfBfyE87KtOmFCDb0esMfp38pM2KjmYFsgt9QDokP+KoTJtSgOxBstM6XpG026zoaFYgzyD5G9fxlKTFUZk2pQB5Hsmnu46HJA02KzqaFcgRJP/XdYyTVMW3u1FNvdsfc7Q/NqXI7qJ7Gbx8x79ms6KjWYGsRzMZvJzuLjoq06YUIJvRQgYv5/p+mxWdzQroXAa/Qd7rrEy7coBdzQyYsFvN4czAX0H5hcYkr9U5LNemJGAvo59Ix2OSRpsVHc4K7AD6qh2gv4haHZZrUxKwp5Dc5+uQI3D5B59kKbBH0Yp2gP57dDiNKb4FthMtIR1rJCeKh0+AwLYhecSl4zNJXxpTfAvsfjSvHaD/DZ0rHj4BAivnhCmk4xfJUBpTfAusnBTlaY+OvyQ3iofXgADfRvL0R8cdPab4PuT/uy16wOvl3xal3QX2AsrvC+VpUfn3hcqEswBvIR1PSJrTmOJbYOUXIXJ/oOMlycHi4RMgsN1oWTtA/y06lMYU3wLbgd4gHR9JjhUPnwCBPYCeIx1L6f2qaCFvQrPKgXdVAa4hgd+HbiL5Bclx/V70w4FwIBwIB8KBcCAcCAfCgXBgzw78A2Wj4+ezw0gaAAAAAElFTkSuQmCC"},"78d2":function(t,e,a){t.exports=a.p+"www/img/default.616f61f2.png"},8209:function(t,e,a){"use strict";var n=a("2269"),i=a.n(n);i.a},"85f2":function(t,e,a){t.exports=a("454f")},"913d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recognition-detail"},[n("navigation-bar",{attrs:{pageName:t.pageName},on:{onLeftClick:t.goBack}}),n("div",{staticClass:"detail-box"},[t.roomInfo.length>0?n("van-swipe",{staticClass:"my-swipe",attrs:{"indicator-color":"#00cccc"}},t._l(t.roomInfo,(function(e,a){return n("van-swipe-item",{key:a},[n("div",{staticClass:"content"},[n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("姓名")]),n("span",{staticClass:"value"},[t._v(t._s(t.info.name))])]),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("性别")]),n("span",{staticClass:"value"},[t._v(t._s("0"==t.info.sex?"男":"女"))])]),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("手机号")]),n("span",{staticClass:"value"},[t._v(t._s(t.info.phone))])]),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("身份")]),n("span",{staticClass:"value"},[t._v(t._s(t.info.groupName))])]),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("住址")]),n("span",{staticClass:"value"},[t._v(t._s(e.doorNum))])]),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("是否录入人脸")]),n("span",{staticClass:"value"},[t._v(t._s(t.hasPic?"是":"否"))])])])])})),1):n("div",{staticClass:"content"},[n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("姓名")]),n("span",{staticClass:"value"},[t._v(t._s(t.info.name))])]),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("性别")]),n("span",{staticClass:"value"},[t._v(t._s("1"==t.info.sex?"男":"女"))])]),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("手机号")]),n("span",{staticClass:"value"},[t._v(t._s(t.info.phone))])]),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("身份")]),n("span",{staticClass:"value"},[t._v(t._s(t.info.groupName))])]),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("住址")]),n("span",{staticClass:"value"},[t._v("暂无数据")])]),n("div",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("是否录入人脸")]),n("span",{staticClass:"value"},[t._v(t._s(t.hasPic?"是":"否"))])])]),n("div",{staticClass:"img-area"},[n("img",{attrs:{src:t.hasPic?t.undefaultPic:t.defaultPic}}),n("button",{staticClass:"upload-btn",on:{click:t.fasongshijian}},[n("img",{attrs:{src:a("e9e4")}}),t._v("\n          "+t._s(t.hasPic?"重新上传":"录入人脸照片")+"\n        ")])])],1),n("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消",round:"","close-on-click-action":""},on:{select:t.onClickedGetPhoto},model:{value:t.showPhotoSelectSheet,callback:function(e){t.showPhotoSelectSheet=e},expression:"showPhotoSelectSheet"}})],1)},i=[],s=(a("ac6a"),a("bd86")),c=(a("7f7f"),a("da6f")),o=a("ab2c"),l=a("e02d"),f=a("1b06"),u=a("da6a"),r=a("96e6"),d={name:"recognitionDetail",components:Object(s["a"])({NavigationBar:u["a"]},o["a"].name,o["a"]),data:function(){return{pageName:"业主人脸录入",custNews:null,faceId:"",info:{},roomInfo:[],hasPic:!1,defaultPic:a("78d2"),undefaultPic:"",showPhotoSelectSheet:!1,actions:[{name:"拍照"},{name:"从手机相册选择"}]}},created:function(){},mounted:function(){window.addEventListener("message",(function(t){console.log("---------------------------listenMessage"),console.log(t)}),!1)},methods:{fasongshijian:function(){Object(r["b"])("xt1")},goBack:function(){this.$router.push({path:"/recognition"})},getFaceInfoDetail:function(){this.loading=!0;var t=this;Object(l["a"])(this.faceId).then((function(e){t.loading=!1;e.data;if(t.info=e.data.model,t.roomInfo=e.data.rooms,t.info.faceFileId){console.log("有照片,调用download展示照片");var a=t.info.faceFileId;t.getPic(a)}})).catch((function(e){t.loading=!1,console.log("获取人脸详情报错了",e),t.$toast(e)}))},getPic:function(t){var e=this;this.loading=!0,console.log("--getPic--download--"),Object(l["c"])(t).then((function(t){console.log("获取图片成功",t);var a=new Blob([t.data],{type:"application/octet-stream;charset=utf-8"});console.log(URL.createObjectURL(a)),e.undefaultPic=URL.createObjectURL(a),e.hasPic=!0,e.loading=!1}))},onClickedGetPhoto:function(t,e){this.getPictureData(e)},getPictureData:function(t){t?this.getLocalPicture():this.useCamera()},getLocalPicture:function(){var t=this;this.$plugin.usePlugin("getPictures")(1,(function(e){e.forEach((function(e){t.uploadPhotoFile(e)}))}),(function(e){t.$toast(e)}))},useCamera:function(){var t=this;this.$plugin.usePlugin("camera")((function(e){t.uploadPhotoFile(e)}),(function(e){t.$toast(e)}),{allowsEditing:!0})},uploadPhotoFile:function(t){var e=c["b"].get("showLoadingView");e&&e(!0);var a=this,n=c["a"].getStorage("xtBaseUrl")+"/web/face/check/pic",i=new FileUploadOptions,s={};s.file=t,s.type="face",s.edit="edit",s.faceId=this.faceId,i.params=s;var o=c["a"].getStorage("controlToken");i.headers={contentType:"multipart/form-data"},i.headers={Authorization:o};var l=function(t){e&&e(!1);var n=JSON.parse(t.response);if(200==n.code){var i=n.data.fileupload.id;a.getPic(i),a.face2Device(),a.$toast("上传成功，正在下发设备")}else a.picUrl="",a.$toast(n.message)},f=function(t){e&&e(!1),a.picUrl="",a.$toast("上传失败，请重新上传")};this.$plugin.usePlugin("fileTransfer")(n,encodeURI(t),l,f,i)},face2Device:function(){var t=this;console.log("--face2Device--"),this.loading=!0,Object(f["e"])(this.faceId,this.custNews.AREA_CODE).then((function(e){t.loading=!1,console.log(t.faceId),console.log(JSON.stringify(e)),"200"==e.code?t.$toast("成功下发设备"):t.$toast("下发设备失败，请去物业后台进行人脸下发")})).catch((function(e){t.loading=!1,t.$toast("下发设备失败，请去物业后台进行人脸下发")}))}}},A=d,g=(a("8209"),a("2877")),p=Object(g["a"])(A,n,i,!1,null,"a7a09b5c",null);e["default"]=p.exports},"960f":function(t,e,a){"use strict";var n=a("2627"),i=a.n(n);i.a},bd86:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("85f2"),i=a.n(n);function s(t,e,a){return e in t?i()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},da6a:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navBar van-nav-bar",style:t.navBarStyle},[t.isShowLeft?a("div",{staticClass:"left",style:t.bothWidth,on:{click:function(e){return t.$emit("onLeftClick")}}},[t.isShowBack?a("img",{attrs:{src:t.backImg,alt:"",srcset:""}}):t._e(),t._t("nav-left")],2):t._e(),a("div",{staticClass:"center"},[t.isDefault?a("span",{staticClass:"title"},[t._v(t._s(t.pageName))]):t._e(),t._t("nav-center")],2),t.isShowRight?a("div",{staticClass:"right",style:t.bothWidth},[t._t("nav-right")],2):t._e()])},i=[],s={props:{isDefault:{default:!0,type:Boolean},bothWidth:{type:Object,default:function(){return{width:"36px"}}},isShowRight:{default:!0,type:Boolean},isShowLeft:{default:!0,type:Boolean},isShowBack:{default:!0,type:Boolean},leftImgType:{type:String,default:"0"},pageName:{default:"",type:String},navBarStyle:{type:Object,default:function(){return{backgroundColor:"#fff"}}}},data:function(){return{backImg:a("4f11")}},mounted:function(){this.isLeftImg()},methods:{isLeftImg:function(){switch(this.leftImgType){case"0":this.backImg=a("4f11");break;case"1":this.backImg=a("4f11");break}}}},c=s,o=(a("960f"),a("2877")),l=Object(o["a"])(c,n,i,!1,null,"7e35d797",null);e["a"]=l.exports},e02d:function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"d",(function(){return l})),a.d(e,"g",(function(){return f})),a.d(e,"f",(function(){return u})),a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return d})),a.d(e,"c",(function(){return A}));var n=a("bc3a"),i=a.n(n),s=a("2b69"),c=(a("96e6"),a("da6f")),o=function(t){return new Promise((function(e,a){s["a"].get("/web/face/app/wy/selectRegion",t).then((function(t){e(t)})).catch((function(t){a(t)}))}))},l=function(t){return new Promise((function(e,a){s["a"].get("/web/face/app/wy/selectBuild",t).then((function(t){e(t)})).catch((function(t){a(t)}))}))},f=function(t){return new Promise((function(e,a){s["a"].get("/web/face/app/wy/selectUnit",t).then((function(t){e(t)})).catch((function(t){a(t)}))}))},u=function(t){return new Promise((function(e,a){s["a"].get("/web/face/app/wy/selectRoom",t).then((function(t){e(t)})).catch((function(t){a(t)}))}))},r=function(t){return new Promise((function(e,a){s["a"].get("/web/face/app/wy/find",t).then((function(t){e(t)})).catch((function(t){a(t)}))}))},d=function(t){return new Promise((function(e,a){s["a"].get("/web/face/app/wy/"+t).then((function(t){e(t)})).catch((function(t){a(t)}))}))},A=function(t){return i()({url:c["a"].getStorage("xtBaseUrl")+"/subsystem/api/support/ftps/download1?id="+t,method:"get",responseType:"arraybuffer",ignoreCodeValidation:!0})}},e9e4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAFAAAAAAnxZisAAABp0lEQVQ4EZWVPUsDQRCGL0YFvwIWYmVppYRgZ2EhCBaiaCE2gmBlZ2EpWAk2gv8hlUUKOy0UtBYrQRtjpWhAFBQjEeP5TGDXYe92ww087Ds7X7lk9xJFAYvjeBHewWc1AguBFv4QhfPw7eus9hvoOV+nHMFVgsuQc5Jm8budPZ/bIHDiBH/xKzLgE9HrBNPcmM0aSOEw5KGd1SP1qD75RmADBk03dAHW4BmC1m7AOdUjprG7EhuCo9CE0IAqhfarQ/fBFEzDgBmG7oQrSLXQgBnVZIXqV9XhA72u4kX81BPnG3ChiicpbqrmWspJaxmbhzpgdIdJcNYz5W+jfXk7Ku9UaSt9hY82I4omlHZlSW08KG2lb4D9ccl8sdlJoWM9ybD/0cdUsntDVSg6Vs640v/S/BjO+oTfegrWfrhx4uLeQ+vysebhGhLmO0WSeGA+BlruwB5cgpz5fSio+BZ+qoUGyNG0d8E0c1dySlBP7c5maIDU/MAudKU0lhflJnyB1yRJ3pLt7I6ECtxCE0ZhCYoQNBkgr1/3vyBYlCEYyz0oZyjImlr+A21cIn7EeE/zAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=chunk-3fc32fac.508ad38c.js.map
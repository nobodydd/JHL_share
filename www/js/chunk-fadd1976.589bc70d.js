(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fadd1976"],{2627:function(e,s,t){},"2e7a":function(e,s,t){"use strict";var a=t("b6ef"),i=t.n(a);i.a},"4f11":function(e,s){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAqhJREFUeAHtms1L1UEUhtX8IJUwEEGiRKggEqGNiwpx08qiaOEmMKE2QctyIfQXRGAtxJ0o1CYEEaTCRYsgqEUgRAWChIohRBpEH1TengMOHIZWwoHD3HPgZebcO8yc5x283pnframJCAfCgXAgHAgHwoFwIBwIB8KBcMChA5VKpRu9QJto2GGJdiUB3Is+oRTrdqs5mxnifrSdyHfbGWdl2pQD7CX0I4OfJq+3WdHRrEBeR38y+LvktY7KtCkFyLEMfIf8ls1qjmaV3UX3M/jf5FcdlWlTCpAN6FEG/5180GZFR7MC2YqeZfBfyE87KtOmFCDb0esMfp38pM2KjmYFsgt9QDokP+KoTJtSgOxBstM6XpG026zoaFYgzyD5G9fxlKTFUZk2pQB5Hsmnu46HJA02KzqaFcgRJP/XdYyTVMW3u1FNvdsfc7Q/NqXI7qJ7Gbx8x79ms6KjWYGsRzMZvJzuLjoq06YUIJvRQgYv5/p+mxWdzQroXAa/Qd7rrEy7coBdzQyYsFvN4czAX0H5hcYkr9U5LNemJGAvo59Ix2OSRpsVHc4K7AD6qh2gv4haHZZrUxKwp5Dc5+uQI3D5B59kKbBH0Yp2gP57dDiNKb4FthMtIR1rJCeKh0+AwLYhecSl4zNJXxpTfAvsfjSvHaD/DZ0rHj4BAivnhCmk4xfJUBpTfAusnBTlaY+OvyQ3iofXgADfRvL0R8cdPab4PuT/uy16wOvl3xal3QX2AsrvC+VpUfn3hcqEswBvIR1PSJrTmOJbYOUXIXJ/oOMlycHi4RMgsN1oWTtA/y06lMYU3wLbgd4gHR9JjhUPnwCBPYCeIx1L6f2qaCFvQrPKgXdVAa4hgd+HbiL5Bclx/V70w4FwIBwIB8KBcCAcCAfCgXBgzw78A2Wj4+ezw0gaAAAAAElFTkSuQmCC"},"960f":function(e,s,t){"use strict";var a=t("2627"),i=t.n(a);i.a},b6ef:function(e,s,t){},c2c7:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"passwdchange"},[t("navigation-bar",{staticClass:"task-nav-bar",attrs:{pageName:"忘记密码",border:!1},on:{onLeftClick:e.goBack}}),t("div",{staticClass:"passwd_content"},[t("div",{staticClass:"loginHeader"}),t("div",{staticClass:"loginTitle"},[e._v("忘记密码")]),t("div",{staticClass:"loginArea"},[t("div",{staticClass:"phoneArea"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNum,expression:"phoneNum"}],staticClass:"phoneInput",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')",maxlength:"11",type:"text",placeholder:"手机号"},domProps:{value:e.phoneNum},on:{input:function(s){s.target.composing||(e.phoneNum=s.target.value)}}})]),t("div",{staticClass:"checkArea"},[t("div",{staticClass:"check_code_div"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneCode,expression:"phoneCode"}],staticClass:"checkInput",attrs:{type:"text",placeholder:"验证码"},domProps:{value:e.phoneCode},on:{input:function(s){s.target.composing||(e.phoneCode=s.target.value)}}}),t("div",{staticClass:"checkButton",on:{click:function(s){return e.sendPhoneCode(s)}}},[e._v("  "+e._s(e.verifyCodeStr)+"  \n                    ")])])]),t("div",{staticClass:"phoneArea"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newUserPassWd,expression:"newUserPassWd"}],staticClass:"phoneInput",attrs:{maxlength:"11",type:"password",placeholder:"输入新密码"},domProps:{value:e.newUserPassWd},on:{input:function(s){s.target.composing||(e.newUserPassWd=s.target.value)}}})]),t("div",{staticClass:"phoneArea"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newUserPassWd2,expression:"newUserPassWd2"}],staticClass:"phoneInput",attrs:{maxlength:"11",type:"password",placeholder:"确认密码"},domProps:{value:e.newUserPassWd2},on:{input:function(s){s.target.composing||(e.newUserPassWd2=s.target.value)}}})])]),t("div",{staticClass:"loginBut",attrs:{plain:""},on:{click:e.updateNewPassword}},[e._v("确认修改")])])],1)},i=[],o=(t("a481"),t("da6a")),n=t("d28e"),r=t("371c"),c={name:"PasswdChange",components:{NavigationBar:o["a"]},data:function(){return{containerName:"PasswdChange",verifyCodeStr:"发送验证码",phoneNum:"",phoneCode:"",publicKey:"",rsaPassWord:"",newUserPassWd:"",newUserPassWd2:"",time1:0,id:"0",clockID:""}},activated:function(){this.resetData()},methods:{resetData:function(){this.phoneNum="",this.phoneCode="",this.rsaPassWord="",this.newUserPassWd="",this.newUserPassWd2="",this.verifyCodeStr="发送验证码",window.clearInterval(this.clockID),this.clockID="",this.id="0",this.getPubKey(!1)},sendPhoneCode:function(e){var s=this;if(void 0!==this.phoneNum&&""!==this.phoneNum)if(/^(((11[0-9]{1})|(12[0-9]{1})|(13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))+\d{8})$/.test(this.phoneNum)){this.time1=Object(n["e"])();this.phoneNum;if("0"===this.id){if(!this.publicKey)return console.log("key "+JSON.stringify(this.publicKey)),void this.getPubKey(!1,!0);var t=this.phoneNum+",10";this.rsaPhoneInfo=this.$getRSASign(t,this.publicKey),r["a"].i(this.rsaPhoneInfo);var a=this.rsaPhoneInfo;Object(n["f"])(a).then((function(e){if(console.log(JSON.stringify(e)),0==e.resultCode){s.id="1";try{var t=60;s.verifyCodeStr=t+"秒后重发",s.clockID=window.setInterval((function(){t--,t>0&&(s.verifyCodeStr=t+"秒后重发"),t<=0&&(window.clearInterval(s.clockID),s.verifyCodeStr="重发验证码",t=60,s.id="0")}),1e3)}catch(a){s.showMsg(a)}}else s.showMsg(e.msg)})).catch((function(e){console.log("get phone code failed."+e),s.showMsg(e)}))}else this.showMsg("请稍后重试！")}else this.showMsg("请输入正确的手机号");else this.showMsg("手机号不能为空")},showMsg:function(e){this.$toast(e)},updateNewPassword:function(){var e=this;if(!this.publicKey)return console.log("key "+JSON.stringify(this.publicKey)),void this.getPubKey(!0);if(void 0!=this.phoneNum&&""!=this.phoneNum)if(void 0!=this.phoneCode&&""!=this.phoneCode)if(void 0!=this.newUserPassWd&&""!=this.newUserPassWd)if(void 0!=this.newUserPassWd2&&""!=this.newUserPassWd2)if(this.newUserPassWd==this.newUserPassWd2)if(this.newUserPassWd.length<6)this.showMsg("密码不能少于6位");else if(this.newUserPassWd.length>16)this.showMsg("密码不能多于16位");else if(0!==this.time1){var s=Object(n["e"])(),t=new Date(this.time1.replace(/\-/g,"/")),a=new Date(s.replace(/\-/g,"/")),i=a.getTime()-t.getTime(),o=Math.round(i/1e3);if(r["a"].l("heijianye- date1: "+t+"; date2: "+a+"; date3: "+i+"; seconds: "+o),300<o)this.showMsg("请重新发送验证码");else{var c=btoa(this.newUserPassWd);console.log(c);var h=this.phoneNum+","+this.phoneCode+","+c;this.rsaPassWord=this.$getRSASign(h,this.publicKey),r["a"].i(this.rsaPassWord);var l=this.rsaPassWord;Object(n["a"])(l).then((function(s){"0"==s.resultCode?(e.showMsg("修改成功"),e.$router.back()):(e.showMsg(s.msg),r["a"].i(s.msg))})).catch((function(s){console.log("passwd update failed for "+s),"网络异常！"==s?e.showMsg("网络异常，请检查网络！"):e.showMsg("登录密码修改失败~")}))}}else this.showMsg("请重新获取验证码");else this.showMsg("两次密码输入不一致");else this.showMsg("两次密码输入不一致");else this.showMsg("密码不能为空");else this.showMsg("验证码不能为空");else this.showMsg("手机号不能为空")},goBack:function(){this.$router.back()},getPubKey:function(e,s){var t=this;Object(n["g"])().then((function(a){t.publicKey=a.data.publicKey,e&&(console.log("get pub key for passwd update."),t.updateNewPassword()),s&&(console.log("get pub key for phone code."),t.sendPhoneCode())})).catch((function(a){console.log("get pub key failed "+a),e&&(console.log("get pub key for passwd update failed."+a),"网络异常！"==a?t.showMsg("网络异常，请检查网络！"):t.showMsg("登录密码修改失败~")),s&&(console.log("get pub key for phone code failed."+a),"网络异常！"==a?t.showMsg("网络异常，请检查网络！"):t.showMsg("验证码获取失败~"))}))}}},h=c,l=(t("2e7a"),t("2877")),d=Object(l["a"])(h,a,i,!1,null,"01689fc2",null);s["default"]=d.exports},da6a:function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"navBar van-nav-bar",style:e.navBarStyle},[e.isShowLeft?t("div",{staticClass:"left",style:e.bothWidth,on:{click:function(s){return e.$emit("onLeftClick")}}},[e.isShowBack?t("img",{attrs:{src:e.backImg,alt:"",srcset:""}}):e._e(),e._t("nav-left")],2):e._e(),t("div",{staticClass:"center"},[e.isDefault?t("span",{staticClass:"title"},[e._v(e._s(e.pageName))]):e._e(),e._t("nav-center")],2),e.isShowRight?t("div",{staticClass:"right",style:e.bothWidth},[e._t("nav-right")],2):e._e()])},i=[],o={props:{isDefault:{default:!0,type:Boolean},bothWidth:{type:Object,default:function(){return{width:"36px"}}},isShowRight:{default:!0,type:Boolean},isShowLeft:{default:!0,type:Boolean},isShowBack:{default:!0,type:Boolean},leftImgType:{type:String,default:"0"},pageName:{default:"",type:String},navBarStyle:{type:Object,default:function(){return{backgroundColor:"#fff"}}}},data:function(){return{backImg:t("4f11")}},mounted:function(){this.isLeftImg()},methods:{isLeftImg:function(){switch(this.leftImgType){case"0":this.backImg=t("4f11");break;case"1":this.backImg=t("4f11");break}}}},n=o,r=(t("960f"),t("2877")),c=Object(r["a"])(n,a,i,!1,null,"7e35d797",null);s["a"]=c.exports}}]);
//# sourceMappingURL=chunk-fadd1976.589bc70d.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-361f20a5"],{"074c":function(t,e,i){"use strict";var s=i("2814"),a=i.n(s);a.a},2627:function(t,e,i){},2814:function(t,e,i){},"4f11":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAqhJREFUeAHtms1L1UEUhtX8IJUwEEGiRKggEqGNiwpx08qiaOEmMKE2QctyIfQXRGAtxJ0o1CYEEaTCRYsgqEUgRAWChIohRBpEH1TengMOHIZWwoHD3HPgZebcO8yc5x283pnframJCAfCgXAgHAgHwoFwIBwIB8KBcMChA5VKpRu9QJto2GGJdiUB3Is+oRTrdqs5mxnifrSdyHfbGWdl2pQD7CX0I4OfJq+3WdHRrEBeR38y+LvktY7KtCkFyLEMfIf8ls1qjmaV3UX3M/jf5FcdlWlTCpAN6FEG/5180GZFR7MC2YqeZfBfyE87KtOmFCDb0esMfp38pM2KjmYFsgt9QDokP+KoTJtSgOxBstM6XpG026zoaFYgzyD5G9fxlKTFUZk2pQB5Hsmnu46HJA02KzqaFcgRJP/XdYyTVMW3u1FNvdsfc7Q/NqXI7qJ7Gbx8x79ms6KjWYGsRzMZvJzuLjoq06YUIJvRQgYv5/p+mxWdzQroXAa/Qd7rrEy7coBdzQyYsFvN4czAX0H5hcYkr9U5LNemJGAvo59Ix2OSRpsVHc4K7AD6qh2gv4haHZZrUxKwp5Dc5+uQI3D5B59kKbBH0Yp2gP57dDiNKb4FthMtIR1rJCeKh0+AwLYhecSl4zNJXxpTfAvsfjSvHaD/DZ0rHj4BAivnhCmk4xfJUBpTfAusnBTlaY+OvyQ3iofXgADfRvL0R8cdPab4PuT/uy16wOvl3xal3QX2AsrvC+VpUfn3hcqEswBvIR1PSJrTmOJbYOUXIXJ/oOMlycHi4RMgsN1oWTtA/y06lMYU3wLbgd4gHR9JjhUPnwCBPYCeIx1L6f2qaCFvQrPKgXdVAa4hgd+HbiL5Bclx/V70w4FwIBwIB8KBcCAcCAfCgXBgzw78A2Wj4+ezw0gaAAAAAElFTkSuQmCC"},"6fc9":function(t,e,i){},8249:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nes_msg_detail"},[s("navigation-bar",{attrs:{pageName:"消息详情"},on:{onLeftClick:t.goBack}}),t.detail?s("div",{staticClass:"detail"},[s("div",{staticClass:"head"},[t.detail.headPic?s("img",{attrs:{src:t.detail.headPic,alt:""}}):s("img",{attrs:{src:i("6d1e"),alt:""}}),s("div",[t._v(t._s(t.detail.nickName))])]),s("div",{staticClass:"content"},[t._v(t._s(t.detail.content))]),s("div",{staticClass:"img-box"},[t.detail.notePic?s("van-row",{staticClass:"message-img",class:{"big-image":1==t.detail.notePic.length}},t._l(t.detail.notePic,(function(e,i){return s("van-col",{key:i,attrs:{span:"6"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"imgurl"}],key:e,attrs:{alt:""},on:{click:function(e){return t.preview(t.detail.notePic,i)}}})])})),1):t._e()],1),s("div",{staticClass:"operate-box"},[s("div",{staticClass:"left"},[s("div",{staticClass:"time"},[t._v(t._s(t.detail.createdTime))])]),s("div",{staticClass:"right"},[s("span",{on:{click:function(e){return t.setLike(t.detail.noteCode,t.detail.likerList)}}},[t.checkLike(t.detail.likerList)?s("img",{staticClass:"cls-icon",attrs:{src:i("69ed"),alt:""}}):s("img",{staticClass:"cls-icon",attrs:{src:i("bd0c"),alt:""}}),t.detail.likerList?s("span",[t._v(t._s(t.detail.likerList.length))]):t._e()]),s("span",{staticClass:"replay",on:{click:function(e){return t.addComments(t.detail.noteCode)}}},[s("img",{staticClass:"cls-icon",attrs:{src:i("5fbc"),alt:""}}),t._v("\n              "+t._s(t.detail.commentList?t.detail.commentList.length:0)+"\n            ")])])]),t.detail.likerList.length>0||t.detail.commentList.length>0?s("div",{staticClass:"reply-container"},[t.detail.likerList.length>0?s("van-row",{staticClass:"goods-group",attrs:{type:"flex"}},[s("span",{staticClass:"class-span"},[s("img",{staticClass:"cls-icon",attrs:{src:i("2f26"),alt:""}})]),s("van-col",{staticClass:"goods-person"},t._l(t.detail.likerList,(function(e,i){return s("span",{key:i},[t._v("\n                "+t._s(e.nickName)+"\n                "),i!=t.detail.likerList.length-1?s("i",[t._v(",")]):t._e()])})),0)],1):t._e(),t.detail.commentList?s("div",t._l(t.detail.commentList,(function(e,a){return s("div",{key:a,staticClass:"reply-group",attrs:{type:"flex"}},[s("div",{staticClass:"reply-item"},[s("div",{staticClass:"reply-desc",on:{click:function(i){return t.replyAction(e,t.detail.noteCode)}}},[s("span",{staticClass:"reply-name",class:{"reply-flag":!e.returner}},[t._v("\n                    "+t._s(e.nickName)+"\n                    "),1==e.isProperty?s("img",{attrs:{src:i("1187"),width:"36px;"}}):t._e()]),e.returner?s("span",{staticClass:"result"},[t._v("回复")]):t._e(),s("span",{staticClass:"reply-name",class:{"reply-flag":e.returner}},[t._v(t._s(e.returner))]),s("p",{staticClass:"reply-text"},[t._v(t._s(e.content))])]),s("van-row",t._l(e.evalPic,(function(i,a){return s("van-col",{key:a,attrs:{span:"6"}},[s("img",{staticClass:"small-reply-img",attrs:{src:i,alt:""},on:{click:function(i){return t.preview(e.evalPic,a)}}})])})),1)],1)])})),0):t._e(),s("van-row")],1):t._e()]):t._e(),s("van-action-sheet",{attrs:{actions:t.deleteActions,"cancel-text":"取消",round:"","close-on-click-action":""},on:{select:t.delCommentAction},model:{value:t.deleteShow,callback:function(e){t.deleteShow=e},expression:"deleteShow"}}),s("Preview",{ref:"myPreview",attrs:{images:t.images},on:{indexChange:t.indexChange}})],1)},a=[],n=i("5629"),o=i("da6f"),l=i("e036"),c=i("387e"),r=i("da6a"),d={name:"NewMsgDetail",mounted:function(){},activated:function(){this.$route.params.refreshDetail&&(this.resetDetailData(),this.userInfo=o["b"].get("userInfo"),this.noteCode=this.$route.params.noteCode,this.getDetail())},data:function(){return{deleteActions:[{name:"删除"}],deleteShow:!1,detail:null,noteCode:"",isLikeSetting:!1,images:[],imgComps:[]}},components:{Preview:l["a"],NavigationBar:r["a"]},methods:{resetDetailData:function(){this.deleteShow=!1,this.detail=null,this.noteCode="",this.isLikeSetting=!1},goBack:function(){this.$router.back(-1)},getDetail:function(){var t=this;Object(n["f"])({noteCode:this.noteCode}).then((function(e){"0"==e.resultCode?t.detail=e.data:t.$toast(e.msg)}),(function(e){t.$toast(e)}))},checkLike:function(t){var e=this;return!!t&&t.some((function(t){return t.userCode==e.userInfo.USER_CODE}))},setLike:function(t,e){var i=this;if(this.isLikeSetting)console.log("like is setting.");else{this.isLikeSetting=!0;var s={concemflag:1,isProperty:1,noteCode:t,userCode:this.userInfo.USER_CODE};s.concemflag=e&&e.some((function(t){return t.userCode==s.userCode}))?0:1,Object(n["l"])(s).then((function(t){i.isLikeSetting=!1,i.getDetail()}),(function(t){i.isLikeSetting=!1})).catch((function(t){i.isLikeSetting=!1}))}},replyAction:function(t,e){if(this.userInfo.USER_CODE===t.userCode)this.deleteShow=!0,this.delActionObj={noteCode:e,evalCode:t.evalCode};else{var i=Object.assign(c["a"].objectFullCopy(t),{NOTE_CODE:e});this.asyncUpdateDetail(),this.$router.push({name:"addNote",params:{pageType:"reply",replyParam:JSON.stringify(i),fromNewMsgDetail:1}})}},preview:function(t,e){var i=t.map((function(t){return t}));this.images=i,this.indexChange(e),this.$refs.myPreview.setIndex(e),this.$refs.myPreview.setIsShowPreview(!0)},indexChange:function(t){var e=this,i=this.images[t];if(-1!=i.lastIndexOf("@")){var s,a=i.lastIndexOf("."),n=i.lastIndexOf("@"),o=i.substring(0,n)+i.substring(a,i.length);0!=this.imgComps.length&&this.imgComps[t]?this.imgComps[t].onload=null:this.imgComps[t]=new Image,s=this.imgComps[t],s.onload=function(){e.$set(e.images,t,o)},s.src=o}},addComments:function(t){this.asyncUpdateDetail(),this.$router.push({name:"addNote",params:{pageType:"comments",noteCode:t,fromNewMsgDetail:1}})},asyncUpdateDetail:function(){var t=this;o["b"].set("updateNewMsgDetail",(function(){t.getDetail()}))},delCommentAction:function(){var t=this,e=this.delActionObj,i=e.noteCode,s=e.evalCode;Object(n["c"])(i,s).then((function(){t.getDetail()}))}}},u=d,f=(i("9c8d"),i("074c"),i("2877")),g=Object(f["a"])(u,s,a,!1,null,"83900924",null);e["default"]=g.exports},"960f":function(t,e,i){"use strict";var s=i("2627"),a=i.n(s);a.a},"9c8d":function(t,e,i){"use strict";var s=i("6fc9"),a=i.n(s);a.a},da6a:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"navBar van-nav-bar",style:t.navBarStyle},[t.isShowLeft?i("div",{staticClass:"left",style:t.bothWidth,on:{click:function(e){return t.$emit("onLeftClick")}}},[t.isShowBack?i("img",{attrs:{src:t.backImg,alt:"",srcset:""}}):t._e(),t._t("nav-left")],2):t._e(),i("div",{staticClass:"center"},[t.isDefault?i("span",{staticClass:"title"},[t._v(t._s(t.pageName))]):t._e(),t._t("nav-center")],2),t.isShowRight?i("div",{staticClass:"right",style:t.bothWidth},[t._t("nav-right")],2):t._e()])},a=[],n={props:{isDefault:{default:!0,type:Boolean},bothWidth:{type:Object,default:function(){return{width:"36px"}}},isShowRight:{default:!0,type:Boolean},isShowLeft:{default:!0,type:Boolean},isShowBack:{default:!0,type:Boolean},leftImgType:{type:String,default:"0"},pageName:{default:"",type:String},navBarStyle:{type:Object,default:function(){return{backgroundColor:"#fff"}}}},data:function(){return{backImg:i("4f11")}},mounted:function(){this.isLeftImg()},methods:{isLeftImg:function(){switch(this.leftImgType){case"0":this.backImg=i("4f11");break;case"1":this.backImg=i("4f11");break}}}},o=n,l=(i("960f"),i("2877")),c=Object(l["a"])(o,s,a,!1,null,"7e35d797",null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-361f20a5.531df76b.js.map
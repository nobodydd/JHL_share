(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cd67bb4"],{"0613":function(e,t,i){"use strict";var n=i("8220"),o=i.n(n);o.a},2627:function(e,t,i){},"375b":function(e,t,i){},4917:function(e,t,i){"use strict";var n=i("cb7c"),o=i("9def"),s=i("0390"),a=i("5f1b");i("214f")("match",1,(function(e,t,i,r){return[function(i){var n=e(this),o=void 0==i?void 0:i[t];return void 0!==o?o.call(i,n):new RegExp(i)[t](String(n))},function(e){var t=r(i,e,this);if(t.done)return t.value;var l=n(e),c=String(this);if(!l.global)return a(l,c);var d=l.unicode;l.lastIndex=0;var u,h=[],p=0;while(null!==(u=a(l,c))){var f=String(u[0]);h[p]=f,""===f&&(l.lastIndex=s(c,o(l.lastIndex),d)),p++}return 0===p?null:h}]}))},"4e4d":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{staticClass:"image-list"},[e._l(e.selectPictures,(function(t,i){return n("li",{key:i,style:{width:e.imageWidthAndHeight+"px",height:e.imageWidthAndHeight+"px"}},[e.isShowAdd?n("van-icon",{staticClass:"delete-picture",attrs:{color:"rgb(181, 181, 181)",name:"clear"},on:{click:function(t){return e.deletePicture(i)}}}):e._e(),n("img",{attrs:{src:t,alt:""},on:{click:function(t){return e.preview(i)}}})],1)})),e.accountAddImage&&e.isShowAdd?n("li",[n("div",{staticClass:"add-image",on:{click:e.addAction}},[n("img",{staticClass:"cls-icon",attrs:{src:i("974a"),alt:""}})])]):e._e()],2)])},o=[],s=(i("ac6a"),i("c5f6"),i("28a2")),a=i("d399"),r=(i("a49b"),i("da6f")),l={name:"AddImage",props:{maxImageCount:{type:Number,default:4},selectPictures:{type:Array,default:function(){return[]}},isShowAdd:{type:Boolean,default:!0},imageType:{type:Number,default:-1}},data:function(){return{}},mounted:function(){var e=document.querySelector(".image-list");this.imageWidthAndHeight=e.offsetWidth/4},computed:{accountAddImage:function(){return this.selectPictures.length<this.maxImageCount},maximumImagesCount:function(){return this.maxImageCount-this.selectPictures.length}},watch:{selectPictures:function(e,t){console.log(e),this.$emit("imageMapChange",this.selectPictures.slice(0))}},methods:{preview:function(e){Object(s["a"])({images:this.selectPictures,startPosition:e})},addAction:function(){this.$emit("imageAddAction")},deletePicture:function(e){this.selectPictures.splice(e,1)},addSelect:function(e,t){t?this.getPicture():this.useCamera()},useCamera:function(){var e=this;this.$plugin.usePlugin("camera")((function(t){e.uploadFile(t)}),(function(e){a["a"].fail(e)}))},uploadFile:function(e){var t=this,i=a["a"].loading({duration:0,mask:!0,message:"加载中..."}),n="".concat(r["b"].get("custUrl.homeUrl"),"xwj-sys-media/media/upload/uploadFile"),o={params:{file:"",source:"wyApp",business:"complPic"}};1==this.imageType&&(o.params.business="dicoveryPic"),o.headers={contentType:"multipart/form-data"},this.$plugin.usePlugin("fileTransfer")(n,e,(function(e){i.clear();var n=JSON.parse(e.response);"0"==n.resultCode?t.selectPictures.push(n.data):a["a"].fail(n.msg)}),(function(e){i.clear(),a["a"].fail(e)}),o)},getPicture:function(){var e=this;this.$plugin.usePlugin("getPictures")(this.maximumImagesCount,(function(t){t.forEach((function(t){e.uploadFile(t)}))}),(function(e){a["a"].fail(e)}))}}},c=l,d=(i("0613"),i("2877")),u=Object(d["a"])(c,n,o,!1,null,"0fc768a1",null);t["a"]=u.exports},"4f11":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAqhJREFUeAHtms1L1UEUhtX8IJUwEEGiRKggEqGNiwpx08qiaOEmMKE2QctyIfQXRGAtxJ0o1CYEEaTCRYsgqEUgRAWChIohRBpEH1TengMOHIZWwoHD3HPgZebcO8yc5x283pnframJCAfCgXAgHAgHwoFwIBwIB8KBcMChA5VKpRu9QJto2GGJdiUB3Is+oRTrdqs5mxnifrSdyHfbGWdl2pQD7CX0I4OfJq+3WdHRrEBeR38y+LvktY7KtCkFyLEMfIf8ls1qjmaV3UX3M/jf5FcdlWlTCpAN6FEG/5180GZFR7MC2YqeZfBfyE87KtOmFCDb0esMfp38pM2KjmYFsgt9QDokP+KoTJtSgOxBstM6XpG026zoaFYgzyD5G9fxlKTFUZk2pQB5Hsmnu46HJA02KzqaFcgRJP/XdYyTVMW3u1FNvdsfc7Q/NqXI7qJ7Gbx8x79ms6KjWYGsRzMZvJzuLjoq06YUIJvRQgYv5/p+mxWdzQroXAa/Qd7rrEy7coBdzQyYsFvN4czAX0H5hcYkr9U5LNemJGAvo59Ix2OSRpsVHc4K7AD6qh2gv4haHZZrUxKwp5Dc5+uQI3D5B59kKbBH0Yp2gP57dDiNKb4FthMtIR1rJCeKh0+AwLYhecSl4zNJXxpTfAvsfjSvHaD/DZ0rHj4BAivnhCmk4xfJUBpTfAusnBTlaY+OvyQ3iofXgADfRvL0R8cdPab4PuT/uy16wOvl3xal3QX2AsrvC+VpUfn3hcqEswBvIR1PSJrTmOJbYOUXIXJ/oOMlycHi4RMgsN1oWTtA/y06lMYU3wLbgd4gHR9JjhUPnwCBPYCeIx1L6f2qaCFvQrPKgXdVAa4hgd+HbiL5Bclx/V70w4FwIBwIB8KBcCAcCAfCgXBgzw78A2Wj4+ezw0gaAAAAAElFTkSuQmCC"},"55c4":function(e,t,i){e.exports=i.p+"www/img/query.1e3c5341.png"},8220:function(e,t,i){},8568:function(e,t,i){"use strict";var n=i("375b"),o=i.n(n);o.a},"91d7":function(e,t,i){},9504:function(e,t,i){"use strict";var n=i("91d7"),o=i.n(n);o.a},"960f":function(e,t,i){"use strict";var n=i("2627"),o=i.n(n);o.a},"974a":function(e,t){e.exports="data:image/png;base64,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"},b0eb:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workAdd"},[n("navigation-bar",{attrs:{pageName:"创建工单"},on:{onLeftClick:e.goBack}}),n("div",{staticClass:"box"},[n("div",{staticClass:"field-box"},[n("van-field",{staticStyle:{"padding-left":"0.27rem!important"},attrs:{readonly:"",clickable:"",label:"小区",value:e.residential?e.residential.AREA_NAME:"","input-align":"right",placeholder:"请选择小区","right-icon":"arrow",required:""},on:{click:e.selectResidential}}),n("van-field",{staticStyle:{"padding-left":"0.27rem!important"},attrs:{readonly:"",clickable:"",label:"楼栋",value:e.building?e.building.BUILD_NAME:"","input-align":"right",placeholder:"请选择楼栋","right-icon":"arrow",required:""},on:{click:e.selectBuilding}}),n("van-field",{staticStyle:{"padding-left":"0.27rem!important"},attrs:{readonly:"",clickable:"",label:"房间号",value:e.room?e.room.UNIN_ROOM_NAME:"","input-align":"right",placeholder:"请选择房间号","right-icon":"arrow"},on:{click:e.selectRoom}}),n("van-field",{staticStyle:{"padding-left":"0.27rem!important"},attrs:{readonly:"",clickable:"",label:"工单类型",value:e.workType?e.workType.typeName:"","input-align":"right",placeholder:"请选择工单类型","right-icon":"arrow",required:""},on:{click:e.selectWorkType}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.repairType,expression:"repairType"}],staticClass:"person-info"},[n("van-field",{staticStyle:{"padding-left":"0.27rem!important"},attrs:{clickable:"",label:"报修人","input-align":"right",placeholder:"请选择报修人姓名","right-icon":e.repairType&&1==e.repairType.wayCode?"":e.queryIcon,readonly:e.repairType&&1==e.repairType.wayCode,required:""},on:{"click-right-icon":e.selectOwnerInfo},model:{value:e.repairPersonInfo.repairName,callback:function(t){e.$set(e.repairPersonInfo,"repairName",t)},expression:"repairPersonInfo.repairName"}}),n("van-field",{staticStyle:{"padding-left":"0.27rem!important",border:"0"},attrs:{clickable:"",label:"报修人电话","input-align":"right",placeholder:"请选择报修人电话","right-icon":e.repairType&&1==e.repairType.wayCode?"":e.queryIcon,readonly:e.repairType&&1==e.repairType.wayCode,required:""},on:{"click-right-icon":e.selectOwnerInfo},model:{value:e.repairPersonInfo.repairTel,callback:function(t){e.$set(e.repairPersonInfo,"repairTel",t)},expression:"repairPersonInfo.repairTel"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.workType,expression:"workType"}],staticClass:"work-content"},[n("div",{staticClass:"title"},[e._v("选择工单标签")]),n("div",{staticClass:"type"},e._l(e.labelList,(function(t,i){return n("div",{key:i,class:{active:i==e.labelIndex},on:{click:function(t){return e.selectWorkPlanLabel(i)}}},[e._v("\n                  "+e._s(t.labelName)+"\n                ")])})),0),n("div",{staticClass:"area-box"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.workContent,expression:"workContent"}],staticClass:"content-textarea",attrs:{name:"",id:"",placeholder:"请输入工单内容...",maxlength:"1000"},domProps:{value:e.workContent},on:{input:[function(t){t.target.composing||(e.workContent=t.target.value)},e.filterContent]}}),e.voiceInputEnabled?n("div",{staticClass:"voice-handle"},[n("van-row",{attrs:{span:"8",type:"flex",justify:"space-between"}},[n("van-col",{staticClass:"desc",attrs:{span:"8",id:"voice"}},[n("span",{staticClass:"cls-voice"},[n("img",{staticClass:"cls-icon",attrs:{src:i("e298"),alt:""}}),e._v("\n                            语音录入\n                          "),n("img",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticClass:"voice-input-hint",attrs:{src:i("ddae"),alt:""}})])]),n("van-col",[n("p",{staticClass:"input-length"},[e._v(e._s(e.workContent.length)+"/1000")])])],1)],1):n("div",{staticClass:"num"},[e._v(e._s(e.workContent.length)+"/1000")])])]),n("div",{staticClass:"photo-box"},[e._m(0),n("div",{staticClass:"photo"},[n("add-image",{ref:"addImageComponent",on:{imageAddAction:e.showAddSheetControll,imageMapChange:e.upDateImageData}})],1)])]),n("div",{staticClass:"submit-box"},[n("div",{staticClass:"submit",on:{click:e.saveWorkPlan}},[e._v("提交")]),n("div",{staticClass:"submit",on:{click:e.saveWorkPlanNApply}},[e._v("提交并指派")])]),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showCondition,callback:function(t){e.showCondition=t},expression:"showCondition"}},[n("van-picker",{attrs:{columns:e.conditionList,"show-toolbar":"",title:e.conditionTitle,"value-key":e.showKey,"default-index":e.defaultIndexList[e.selectedConditionType]},on:{cancel:function(t){e.showCondition=!1},confirm:e.seletedCondition}})],1),n("van-action-sheet",{attrs:{actions:e.actions,"cancel-text":"取消",round:"","close-on-click-action":""},on:{select:e.addSelect},model:{value:e.showAddSheet,callback:function(t){e.showAddSheet=t},expression:"showAddSheet"}})],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"title"},[i("div",[e._v("上传图片")]),i("div",{staticClass:"limit"},[e._v("(最多4张)")])])}],s=(i("4917"),i("6b54"),i("a481"),i("ac6a"),i("7f7f"),i("e2f8")),a=i("9e59"),r=i("da6f"),l=i("371c"),c=i("4e4d"),d=i("55c4"),u=i.n(d),h=i("da6a"),p=i("d399"),f={name:"workAdd",data:function(){return{showCondition:!1,showRepairPersonInfo:!1,conditionList:[],selectedConditionType:0,residential:null,building:null,room:null,workType:null,repairType:{wayName:"业主电话报修",wayCode:0},repairPersonInfo:{repairCode:"",repairName:"",repairTel:""},owner:null,labelIndex:-1,residentialList:[],buildingList:[],roomList:[],workTypeList:[{typeName:"报修",typeCode:0},{typeName:"投诉",typeCode:1}],repairTypeList:[{wayName:"业主电话报修",wayCode:0}],ownerList:[],showKey:"AREA_NAME",showKeyList:["AREA_NAME","BUILD_NAME","showUnitRoomName","typeName","wayName","nameAndPhone"],defaultIndexList:[0,0,0,0,0,0],conditionTypeList:["选择小区","选择楼栋","选择房间号","选择工单类型","选择报修方式","选择业主"],defaultAreaCode:"",labelList:[],actions:[{name:"拍照"},{name:"从手机相册选择"}],imgList:[],showAddSheet:!1,workContent:"",userInfo:null,queryIcon:u.a,reloadList:!1,workPlanSaving:!1,workDetail:null,sendVal:!1,speechStopped:!0,posX:0,posY:0,showTips:!1,waitStop:!1,voiceInputEnabled:!1}},components:{"add-image":c["a"],NavigationBar:h["a"]},created:function(){var e=this;this.userInfo=r["b"].get("userInfo"),this.defaultAreaCode=r["b"].get("userInfo").AREA_CODE,this.getResidentialCondition(),this.defaultAreaCode&&this.getBuildingCondition(this.defaultAreaCode),window.onresize=function(){var t=document,i=t.activeElement;l["a"].i("on resize event happened."+i.tagName),e.sendVal&&(e.speechStopped=!0,e.stopSpeech("界面变化"),e.posX=0,e.posY=0),"INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName||setTimeout((function(){i.scrollIntoView()}),100)}},mounted:function(){var e=this;if(this.voiceInputEnabled){var t=document.getElementById("voice");t.addEventListener("touchstart",(function(t){e.speechStopped=!1,e.goToSpeech(t),e.posX=t.touches[0].clientX,e.posY=t.touches[0].clientY}),!1),t.addEventListener("touchmove",(function(t){e.speechStopped||(Math.abs(e.posX-t.touches[0].clientX)>30||Math.abs(e.posY-t.touches[0].clientY)>30)&&(e.speechStopped=!0,e.stopSpeech("滑动操作"))}),!1),t.addEventListener("touchend",(function(t){e.speechStopped||(e.stopSpeech(),e.posX=0,e.posY=0)}),!1);var i=!!r["b"].get("audioPermitted")&&r["b"].get("audioPermitted");i||this.requestAudioPermission()}},beforeRouteLeave:function(e,t,i){"workPlan"==e.name&&(this.reloadList?e.meta.isUseCache=!1:e.meta.isUseCache=!0),i()},methods:{goBack:function(){this.$router.back(-1)},selectData:function(e){this.showCondition=!0,this.selectedConditionType=e,this.showKey=this.showKeyList[e]},selectResidential:function(){this.selectData(0),this.conditionList=this.residentialList},selectBuilding:function(){this.selectData(1),this.conditionList=this.buildingList},selectRoom:function(){this.selectData(2),this.conditionList=this.roomList},selectWorkType:function(){this.selectData(3),this.conditionList=this.workTypeList},selectRepairType:function(){this.selectData(4),this.conditionList=this.repairTypeList},selectOwnerInfo:function(){this.selectData(5),this.conditionList=this.updateOwnerList(this.ownerList)},selectWorkPlanLabel:function(e){this.labelIndex=e},getResidentialCondition:function(){var e=this;Object(s["h"])({data:JSON.stringify({USER_CODE:this.userInfo.USER_CODE})}).then((function(t){e.residentialList=t,e.setDefaultResidential()}),(function(t){e.$toast(t)}))},setDefaultResidential:function(){var e=this;this.residentialList.forEach((function(t,i){t.AREA_CODE==e.defaultAreaCode&&(e.residential=t,e.defaultIndexList[0]=i)}))},getBuildingCondition:function(e){var t=this;Object(s["b"])({data:JSON.stringify({AREA_CODE:e||this.residential.AREA_CODE})}).then((function(e){t.buildingList=e}),(function(e){t.$toast(e)}))},getRoomCondition:function(){var e=this;Object(s["f"])({data:JSON.stringify({BUILD_CODE:this.building.BUILD_CODE})}).then((function(t){e.roomList=t}),(function(t){e.$toast(t)}))},getRoomOwnerList:function(){var e=this;Object(s["g"])({roomCode:this.room.ROOM_CODE}).then((function(t){0==t.resultCode&&(e.ownerList=t.data.ownerList)}),(function(t){e.$toast(t)}))},updateOwnerList:function(e){for(var t=new Array,i=0;i<e.length;i++)t[i]=e[i],t[i].nameAndPhone=e[i].ownerName+"        "+e[i].phone,t[i].ownerName=e[i].ownerName,t[i].phone=e[i].phone;return t},getWorkPlanLabelList:function(e){var t=this;Object(a["k"])({type:e,deptCode:this.userInfo.deptCode}).then((function(e){0==e.resultCode?t.labelList=e.data:t.$toast(e.msg)}),(function(e){t.$toast(e)}))},seletedCondition:function(e,t){if(this.showCondition=!1,e&&0!=e.length)switch(1*this.selectedConditionType){case 0:this.setResidential(e,t);break;case 1:this.setBuilding(e,t);break;case 2:this.setRoom(e,t);break;case 3:this.setWorkType(e,t);break;case 4:this.setRepairType(e,t);break;case 5:this.setOwnerInfo(e,t)}},setResidential:function(e,t){this.residential&&e.AREA_CODE==this.residential.AREA_CODE||(this.defaultIndexList[0]=t,this.residential=e,this.building=null,this.room=null,this.getBuildingCondition(),this.resetRepairPersonInfo())},setBuilding:function(e,t){this.building&&e.BUILD_CODE==this.building.BUILD_CODE||(this.defaultIndexList[1]=t,this.building=e,this.room=null,this.getRoomCondition(),this.resetRepairPersonInfo())},setRoom:function(e,t){this.room&&e.ROOM_CODE==this.room.ROOM_CODE||(this.defaultIndexList[2]=t,this.room=e,this.getRoomOwnerList(),this.resetRepairPersonInfo())},resetRepairPersonInfo:function(){null!=this.repairType&&1!=this.repairType.wayCode&&""!=this.repairPersonInfo.repairName&&""!=this.repairPersonInfo.repairTel&&(this.repairPersonInfo.repairName="",this.repairPersonInfo.repairTel="")},setWorkType:function(e,t){this.workType&&this.workType.typeCode==e.typeCode||(this.defaultIndexList[3]=t,this.workType=e,this.labelIndex=-1,this.getWorkPlanLabelList(e.typeCode,this.userInfo.DE))},setRepairType:function(e,t){this.defaultIndexList[4]=t,this.repairType=e,this.selectOwner({ownerCode:1==e.wayCode?this.userInfo.USER_CODE:"",ownerName:1==e.wayCode?this.userInfo.USER_NAME:"",phone:1==e.wayCode?this.userInfo.PHONE:""})},showRepairPersonPopup:function(){this.room?this.showRepairPersonInfo=!0:this.$toast("请选择房间号")},selectOwner:function(e){this.repairPersonInfo.repairCode=e.ownerCode,this.repairPersonInfo.repairName=e.ownerName,this.repairPersonInfo.repairTel=e.phone,this.showRepairPersonInfo=!1},setOwnerInfo:function(e,t){this.defaultIndexList[5]=t,this.repairPersonInfo.repairCode=e.ownerCode,this.repairPersonInfo.repairName=e.ownerName,this.repairPersonInfo.repairTel=e.phone,this.showRepairPersonInfo=!1},upDateImageData:function(e){this.imgList=e},showAddSheetControll:function(){this.showAddSheet=!this.showAddSheet},addSelect:function(e,t){this.getPictureData(t)},getPictureData:function(e){e?this.$refs.addImageComponent.getPicture():this.$refs.addImageComponent.useCamera()},filterContent:function(){this.workContent=this.workContent.replace(/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/gi,"")},saveWorkPlan:function(){var e=this;if(this.hasCompleteParam())if(this.workPlanSaving)l["a"].i("work plan saving now, ignore.");else{this.workPlanSaving=!0;var t={terminalType:1,areaName:this.residential.AREA_NAME,areaCode:this.residential.AREA_CODE,buildCode:this.building.BUILD_CODE,buildName:this.building.BUILD_NAME,ownerName:this.repairPersonInfo.repairName,ownerPhone:this.repairPersonInfo.repairTel,userCode:this.userInfo.USER_CODE,content:this.workContent,reportType:this.repairType.wayCode,typeFlag:this.workType.typeCode,picUrl:this.imgList,createdBy:this.userInfo.USER_CODE,postCode:this.userInfo.POST_CODE,labelCode:this.labelIndex>-1?this.labelList[this.labelIndex].labelCode:"",WJDM:""};null!=this.room&&(t.roomCode=this.room.ROOM_CODE,t.roomName=this.room.ROOM_NAME,t.unitNo=this.room.UNIT_NO),Object(a["q"])(t).then((function(t){"0"==t.resultCode?(e.$toast("工单创建成功"),e.$router.back(-1)):e.$toast(t.msg),e.workPlanSaving=!1}),(function(t){e.$toast(t),e.workPlanSaving=!1})).catch((function(t){e.workPlanSaving=!1}))}},saveWorkPlanNApply:function(){var e=this;if(this.hasCompleteParam())if(this.workPlanSaving)l["a"].i("work plan saving now, ignore.");else{this.workPlanSaving=!0;var t={terminalType:1,areaName:this.residential.AREA_NAME,areaCode:this.residential.AREA_CODE,buildCode:this.building.BUILD_CODE,buildName:this.building.BUILD_NAME,ownerName:this.repairPersonInfo.repairName,ownerPhone:this.repairPersonInfo.repairTel,userCode:this.userInfo.USER_CODE,content:this.workContent,reportType:this.repairType.wayCode,typeFlag:this.workType.typeCode,picUrl:this.imgList,createdBy:this.userInfo.USER_CODE,postCode:this.userInfo.POST_CODE,labelCode:this.labelIndex>-1?this.labelList[this.labelIndex].labelCode:"",WJDM:""};null!=this.room&&(t.roomCode=this.room.ROOM_CODE,t.roomName=this.room.ROOM_NAME,t.unitNo=this.room.UNIT_NO),Object(a["q"])(t).then((function(t){"0"==t.resultCode?(e.$router.back(-1),console.log(t.data),e.getWorkPlanDetail(t.data)):e.$toast(t.msg),e.workPlanSaving=!1}),(function(t){e.$toast(t),e.workPlanSaving=!1})).catch((function(t){e.workPlanSaving=!1}))}},assign:function(){this.$router.push({name:"workAssign",params:{workDetail:this.workDetail,isEvaluate:1}})},getWorkPlanDetail:function(e){var t=this;Object(a["j"])({complCode:e,userCode:this.userInfo.USER_CODE}).then((function(e){0==e.resultCode?(t.workDetail=e.data,t.assign()):t.$toast(e.msg)}),(function(e){t.$toast(e)}))},hasCompleteParam:function(){return this.building?this.workType?this.repairType?this.repairPersonInfo.repairName?this.repairPersonInfo.repairTel?!this.labelList||this.labelList.length<=0?(this.$toast("工单标签未配置，请退出重试或联系管理员处理！"),!1):this.labelList&&this.labelList.length>0&&this.labelIndex<0?(this.$toast("请选择工单标签！"),!1):!!this.workContent||(this.$toast("请填写工单内容！"),!1):(this.$toast("请选择报修人电话！"),!1):(this.$toast("请选择报修人！"),!1):(this.$toast("请选择报修方式！"),!1):(this.$toast("请选择工单类型！"),!1):(this.$toast("请选择楼栋！"),!1)},stopSpeech:function(e){var t=this,i=cordova.plugins.IflyForXwjPlugin;t.sendVal?(t.waitStop=!0,e?t.$toast(e+", 结束收音，正在识别。"):t.$toast("长按停止，收音结束，正在识别。"),setTimeout((function(){t.waitStop&&(t.sendVal=!1,i.stopListen(null,null,null),console.log("停止收音"+(new Date).toString()))}),3e3)):(Object(p["a"])("说话时间太短，请长按说话"),t.sendVal=!1),t.showTips=!1,clearTimeout(this.pressTimer),this.pressTimer=null},goToSpeech:function(e){this.pressTimer=null;var t=cordova.plugins.IflyForXwjPlugin;this.$toast("正在聆听"),this.showTips=!0;var i=navigator.userAgent,n=!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);"click"===e.type&&0!==e.button||null==this.pressTimer&&this.startSpeech(n,t,!1)},startSpeech:function(e,t,i){var n=this,o=this;this.pressTimer=setTimeout((function(){if(i||(console.log("start speech from touch action, set send val true."),o.sendVal=!0,o.waitStop&&(o.waitStop=!1,t.stopListen(null,null,null))),e)t.startListen((function(i){if(i){if(o.sendVal){var n=i.replace(/[\ |\~|\`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\-|\_|\+|\=|\||\\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\<|\。|\>|\/|\？]/g,""),s=document.querySelector(".content-textarea").selectionStart,a=s==o.workContent.length,r=o.workContent.substring(0,s),l=o.workContent.substring(s),c=s+n.length,d=r.length+n.length+l.length;if(d<=200)o.workContent=r+n+l;else{var u=r+n+l;o.workContent=u.substring(0,200)}a&&(document.querySelector(".content-textarea").scrollTop=5e3),setTimeout((function(){document.querySelector(".content-textarea").selectionStart=c}),500)}}else console.log("没有值");o.sendVal&&this.startSpeech(e,t,!0)}),(function(i){console.log("err"+i),o.sendVal&&this.startSpeech(e,t,!0)}),!1,!0);else{var s=!!r["b"].get("audioPermitted")&&r["b"].get("audioPermitted");if(!s)return void n.$dialog.alert({title:"授权语音权限",message:"使用语音输入功能需要您先授权语音权限。",showCancelButton:!0}).then((function(){o.requestAudioPermission()})).catch((function(){console.log("点击了取消按钮")}));var a=["android.permission.RECORD_AUDIO"],l=cordova.plugins.permissions;l.requestPermissions(a,(function(i){i.hasPermission&&t.startListen((function(i){if(i){if(o.sendVal){console.log(i+(new Date).toString());var n=i.replace(/[\ |\~|\`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\-|\_|\+|\=|\||\\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\<|\。|\>|\/|\？]/g,""),s=document.querySelector(".content-textarea").selectionStart,a=s==o.workContent.length,r=o.workContent.substring(0,s),l=o.workContent.substring(s),c=s+n.length,d=r.length+n.length+l.length;if(d<=1e3)o.workContent=r+n+l;else{var u=r+n+l;o.workContent=u.substring(0,1e3)}a&&(document.querySelector(".content-textarea").scrollTop=5e3),setTimeout((function(){document.querySelector(".content-textarea").selectionStart=c}),500)}}else console.log("没有值");o.sendVal&&o.startSpeech(e,t,!0)}),(function(i){console.log("err"+i),o.sendVal&&o.startSpeech(e,t,!0)}),!1,!0)}),(function(e){alert("请打开麦克风权限")}))}}),300)},requestAudioPermission:function(){var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(!t){var i=["android.permission.RECORD_AUDIO"],n=cordova.plugins.permissions;n.requestPermissions(i,(function(e){e.hasPermission?r["b"].set("audioPermitted",!0):r["b"].set("audioPermitted",!1)}),(function(e){r["b"].set("audioPermitted",!1),this.$toast.alert("请打开麦克风权限")}))}}},computed:{conditionTitle:function(){return this.conditionTypeList[this.selectedConditionType]}}},g=f,m=(i("8568"),i("9504"),i("2877")),A=Object(m["a"])(g,n,o,!1,null,"0f193ec1",null);t["default"]=A.exports},da6a:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"navBar van-nav-bar",style:e.navBarStyle},[e.isShowLeft?i("div",{staticClass:"left",style:e.bothWidth,on:{click:function(t){return e.$emit("onLeftClick")}}},[e.isShowBack?i("img",{attrs:{src:e.backImg,alt:"",srcset:""}}):e._e(),e._t("nav-left")],2):e._e(),i("div",{staticClass:"center"},[e.isDefault?i("span",{staticClass:"title"},[e._v(e._s(e.pageName))]):e._e(),e._t("nav-center")],2),e.isShowRight?i("div",{staticClass:"right",style:e.bothWidth},[e._t("nav-right")],2):e._e()])},o=[],s={props:{isDefault:{default:!0,type:Boolean},bothWidth:{type:Object,default:function(){return{width:"36px"}}},isShowRight:{default:!0,type:Boolean},isShowLeft:{default:!0,type:Boolean},isShowBack:{default:!0,type:Boolean},leftImgType:{type:String,default:"0"},pageName:{default:"",type:String},navBarStyle:{type:Object,default:function(){return{backgroundColor:"#fff"}}}},data:function(){return{backImg:i("4f11")}},mounted:function(){this.isLeftImg()},methods:{isLeftImg:function(){switch(this.leftImgType){case"0":this.backImg=i("4f11");break;case"1":this.backImg=i("4f11");break}}}},a=s,r=(i("960f"),i("2877")),l=Object(r["a"])(a,n,o,!1,null,"7e35d797",null);t["a"]=l.exports},ddae:function(e,t,i){e.exports=i.p+"www/img/search_voice.4b1768a6.gif"},e298:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAABGdBTUEAALGPC/xhBQAAAwJJREFUWAntV79PU1EU/i5Y2hiI0U3QKIPFQCyLK0rUXTeicfPH7qJ/gy7uopuLm7BrUCYSF2raFByqUTTRRGMgSql4Pd9575ZSW9rb1zeQvJPc9r57zv3O9753bvsOkFiiwP5WwPSMvrUGq29vAvYGrJlQXGMLgHmC7JnHMMb2IldvCL8vHkWl+hQWF5qSMniJdOo6To5/aer3WOzziG0eSmUdWWM+oQ/XkEkN6+Cca7wRjZHYiBYZACv5W7D2kRI72D+J4xPfd3H6WDiCX9vLEnNMYm5jLDe7y+95EV1h1izN2Lv/keU6b4A+tTA2uOjqMzphd8AGUgstGTifi20Z2N4RnTDsoKbZ60DVfGFse14tI3pAuCV2LI6EcCyy1oEmCteJEcs0UTgWWetAE4XrxIhlmigci6x1oH4Kl/LrKC1bfC0E7w8KZDb0iy/xrazmC2MZ9600pFjE9DA/wrCfFXvjz0gth7ZBcrVVna6tNU6cz8XSv14ZDsJCzMY9La79CBtTVJyqObeDJz0bzZoH4Mt6o3GNPrUwlnOHYYz0fZ2bJ2HMhdAztRTaYErPxo6CncXq8lWwBDg4r3UbEsPYHQswDOZ3ltrP/FqkD/nD2LRl6dEOod9M41TulaYgOdfXNcvZ2IS+y5/Htl2AwU9kzChO5H4029ZszU9hBe67r0Dbdha8ARpf0LO5S9qzGSxJvyQHUQbn7OPocy/x3MO9aoLlQZZb/BTmjnI5g8r6ohTtWSGziAwud5xUn5CUlbVTkvoN0kNTGB3dJGyn5qcwUZnApK/Ira5p4t92CXzE7YwxjCVZ7iWGJ1mm8FfYEVtZGYGtPFelFcm8kK9nSNnXGDywpmH8+Qt+DWaE6MVgqyhLsmNjQUyw2PFn94SZguWxtXEH+HtPD+JeaXnAIDU7MPiwG2UddDTCDoW1WZFathx2XJazoWtV6rwoz3EOaRmeB8zBx//Nv2+OGMz/0MVAwgcyIeyjVjex0Q+db62enoyUc9+VRDdPJdmTKJAoEEGBf9L4A/H4cbDUAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=chunk-2cd67bb4.c24fc6f7.js.map
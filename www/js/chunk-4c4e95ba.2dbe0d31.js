(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c4e95ba"],{1153:function(t,e,s){t.exports=s.p+"www/img/mine_finishLogo.5646939b.png"},"19b5":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mine-task-page"},[s("van-nav-bar",{staticClass:"task-nav-bar",attrs:{title:t.title,border:!1,"left-arrow":""},on:{"click-left":t.onBack}}),s("div",{staticClass:"task-content"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{directives:[{name:"show",rawName:"v-show",value:!(t.contentLoaded&&0==t.taskList.length),expression:"!(contentLoaded && taskList.length == 0)"}],attrs:{error:t.error,"error-text":"请求失败，点击重新加载",finished:t.finished,"finished-text":"我是有底线的"},on:{"update:error":function(e){t.error=e},load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.taskList,(function(e,i){return s("div",{key:i,staticClass:"task-contentCell ",on:{click:function(s){return t.goDetail(e)}}},[s("div",{staticClass:"cell-top",class:2==e.LINE_FLAG&&3!=e.status?"borderRed":1==e.LINE_FLAG&&3!=e.status?"borderYellow":"borderGrey"},[s("div",{staticClass:"cell-communityName"},[s("div",[t._v(t._s(e.areaName)+t._s(e.buildName)+t._s(e.unitNo?e.unitNo+"- ":"")+t._s(e.roomName))]),1==e.relationFlag||2==e.relationFlag?s("div",{staticClass:"status"},[t._v("\n                "+t._s(1==e.relationFlag?"主工单":"子工单")+"\n              ")]):t._e()]),"0"==e.status?s("div",{staticClass:"fontRed work-status"},[t._v("待接单")]):t._e(),"1"==e.status?s("div",{staticClass:"fontGreen work-status"},[t._v("受理中")]):t._e(),"2"!=e.status||null!=e.closeType&&""!=e.closeType?t._e():s("div",{staticClass:"fontYellow work-status"},[t._v("待评价")]),"3"==e.status&&"0"==e.closeType?s("div",{staticClass:"fontBlack work-status"},[t._v("已结束")]):t._e(),"3"==e.status&&"1"==e.closeType?s("div",{staticClass:"fontBlack work-status"},[t._v("暂时关闭")]):t._e(),"3"==e.status&&"2"==e.closeType?s("div",{staticClass:"fontBlack work-status"},[t._v("已结束")]):t._e()]),s("div",{staticClass:"cell-content"},[s("img",{attrs:{src:e.picList&&e.picList.length>0?e.picList[0]:t.communityPic,alt:""},on:{"~error":function(e){return t.showErrorImg(e)}}}),s("div",{staticClass:"cell-taskDetail"},[s("div",{staticClass:"cell-taskTip"},[t._v("#"+t._s(e.labelName))]),s("div",{staticClass:"cell-taskDes"},[t._v(t._s(e.content))])])]),s("div",{staticClass:"cell-bottom"},[!e.compLimitTime&&e.confLimitTime?s("div",{staticClass:"celll-confirmDate"},[t._v("确认时限 "+t._s(e.confLimitTime))]):e.compLimitTime&&e.confLimitTime&&"1"==e.status?s("div",{staticClass:"celll-confirmDate"},[t._v("处理时限 "+t._s(e.compLimitTime))]):e.compLimitTime&&e.confLimitTime&&"2"==e.status?s("div",{staticClass:"celll-confirmDate"},[t._v("完成时限 "+t._s(e.compLimitTime))]):t._e()])])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:t.contentLoaded&&0==t.taskList.length,expression:"contentLoaded && taskList.length == 0"}],staticClass:"no-list"},[s("img",{attrs:{src:t.noSourceImg,alt:""}}),s("div",[t._v("暂无工单")])])],1)],1)],1)},a=[],o=(s("ac6a"),s("d915")),n=s("da6f"),r=s("2b0e"),c=s("d399"),l=s("2bdd"),d=s("58e6"),u=s("1153"),m=s.n(u),f=s("540d"),v=s.n(f),g=s("55e8"),h=s.n(g);r["default"].use(c["a"]).use(l["a"]).use(d["a"]);var p={name:"mineTask",created:function(){},data:function(){return{active:0,title:"我的工单",taskList:[],refreshing:!1,loading:!1,finished:!1,error:!1,pageNum:1,pageSize:10,contentLoaded:!1,workFinishLogo:m.a,communityPic:v.a,noSourceImg:h.a}},methods:{showErrorImg:function(t){t.currentTarget.src=this.communityPic},getWorkList:function(t){var e=this,s=n["b"].get("custNews");s=s||n["a"].getStorage("custNews");var i={userCode:s.USER_CODE,page:1,rows:10,order:"asc",sort:"name"};Object(o["c"])(i).then((function(s){e.loading=!1,0==s.resultCode?(t&&(e.finished=!1,e.refreshing=!1,e.taskList=[]),s.data.list.forEach((function(t){e.taskList.push(t)})),e.pageNum*e.pageSize>=s.data.total&&(e.finished=!0),e.pageNum++,e.contentLoaded=!0):(e.loading=!1,e.refreshing=!1,e.error=!0,c["a"].fail(s.msg),e.contentLoaded=!0)})).catch((function(t){e.loading=!1,e.refreshing=!1,e.error=!0,c["a"].fail(t),e.contentLoaded=!0}))},onLoad:function(){this.error=!1,this.loading=!0,this.getWorkList(!1)},onRefresh:function(){this.error=!1,this.loading=!1,this.pageNum=1,this.getWorkList(!0)},goDetail:function(t){n["b"].set("workDetailComplCode",t.complCode),n["b"].set("workDetailShowBtn",1),this.$router.push({name:"workDetail"})},onBack:function(){history.back()}}},k=p,w=(s("3e83"),s("2877")),_=Object(w["a"])(k,i,a,!1,null,"455e049b",null);e["default"]=_.exports},"3e83":function(t,e,s){"use strict";var i=s("9f49"),a=s.n(i);a.a},"540d":function(t,e,s){t.exports=s.p+"www/img/mine_community.afdf16d2.png"},"55e8":function(t,e,s){t.exports=s.p+"www/img/noSource.ef090043.png"},"9f49":function(t,e,s){}}]);
//# sourceMappingURL=chunk-4c4e95ba.2dbe0d31.js.map
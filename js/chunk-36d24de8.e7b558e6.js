(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36d24de8"],{4158:function(t,e,n){"use strict";var o=n("8da2"),i=n.n(o);i.a},"8da2":function(t,e,n){},a429:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%",background:"#FFFFFF",width:"100%"}},[n("page-header",{on:{"btn-action":t.openApp}}),n("div",{staticClass:"pageView"},[n("div",{staticStyle:{color:"#999999","margin-bottom":"10px"}},[t._v("验证码:6位数字")]),n("div",[n("van-field",{attrs:{placeholder:"请输入验证码"},model:{value:t.msgCode,callback:function(e){t.msgCode=e},expression:"msgCode"}},[n("van-button",{attrs:{slot:"button",size:"small",disabled:!t.btnEnable},on:{click:t.sendMsgCode},slot:"button"},[t._v(t._s(t.msgBtnText))])],1)],1),n("div",{staticClass:"bottomView"},[n("div",{staticClass:"nextBtn",on:{click:t.commitAction}},[t._v("确 认")])])])],1)},i=[],a=n("2b0e"),s=n("565f"),u=n("b650"),r=n("a39b"),c=n("e181");a["a"].use(u["a"]),a["a"].use(s["a"]);var l={name:"CommitPage",components:{PageHeader:r["a"]},data:function(){return{msgCode:"",uuid:"",phone:"",resultType:"",btnEnable:!0,msgBtnText:"发送验证码",icon:{xwjlogo:n("ecd5")},publicKey:null,firstGetPubKey:!0}},methods:{getPubKey:function(){var t=this;Object(c["e"])().then((function(e){0==e.resultCode?(t.publicKey=e.data.publicKey,!t.firstGetPubKey&&t.publicKey&&t.sendMsgCode()):t.$toast(e.msg),t.firstGetPubKey=!1})).catch((function(e){t.firstGetPubKey=!1}))},sendMsgCode:function(){var t=this;if(this.publicKey){var e=a["a"].prototype.$getRSASign(this.phone+",13",this.publicKey),n={accntInfo:e};Object(c["d"])(n).then((function(e){0==e.resultCode&&t.timeCountDown(),t.$toast(e.msg)})).catch((function(t){console.log(t)}))}else this.getPubKey()},timeCountDown:function(){var t=this;this.btnEnable=!1;var e=60,n=window.setInterval((function(){e--,e>0?t.msgBtnText=e+"秒后重新发送":(t.btnEnable=!0,window.clearInterval(n),t.msgBtnText="获取验证码")}),1e3)},commitAction:function(){var t=this;if(""!=this.msgCode){var e={uuid:this.uuid,phone:this.phone,verificationCode:this.msgCode,approvalResult:this.resultType,tagCode:this.$route.query.identify?JSON.parse(this.$route.query.identify).tagCode:null};Object(c["a"])(e).then((function(e){console.log(e),t.parasData(e)})).catch((function(t){console.log(t)}))}else this.$toast("验证码不能为空")},parasData:function(t){var e=JSON.parse(this.$route.query.data),n="【"+e.areaName+"-"+e.buildName+"-"+e.showRoomName+"】",o={nickName:e.ownerNickName,room:n,type:this.$route.query.type,tagName:this.$route.query.identify?JSON.parse(this.$route.query.identify).tagName:null};console.log(this.$route.query),console.log(o),this.$router.push({path:"/resultPage",query:o})},openApp:function(){this.shareOpenApp("myfamily")}},mounted:function(){var t=this.$route.query,e=JSON.parse(t.data);console.log(e),this.uuid=e.uuid,this.phone=t.phone,this.resultType=t.type,this.getPubKey(),this.androidShareOpenApp("myfamily")}},d=l,h=(n("4158"),n("2877")),p=Object(h["a"])(d,o,i,!1,null,"1df6d846",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-36d24de8.e7b558e6.js.map